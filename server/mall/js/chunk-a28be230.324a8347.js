(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a28be230"],{"2d5e":function(t,s,e){},"4c7b":function(t,s,e){"use strict";var i=e("a8d6"),r=e.n(i);r.a},"508d":function(t,s,e){},5961:function(t,s,e){"use strict";var i=e("508d"),r=e.n(i);r.a},"5dc4":function(t,s,e){},"60d0":function(t,s,e){"use strict";var i=e("5dc4"),r=e.n(i);r.a},"9a2a":function(t,s,e){},"9bd0":function(t,s,e){"use strict";var i=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"tab-control"},t._l(t.tcTitles,(function(s,i){return e("span",{class:{active:t.currentIndex==i},on:{click:function(s){return t.tcClick(i)}}},[t._v(t._s(s))])})),0)},r=[],c={name:"TabControl",data:function(){return{currentIndex:0}},props:{tcTitles:{type:Array,defult:function(){return[]}}},methods:{tcClick:function(t){this.currentIndex=t,this.$emit("tabControlClick",t)}}},n=c,o=(e("cc92"),e("2877")),a=Object(o["a"])(n,i,r,!1,null,"5f4fe43e",null);s["a"]=a.exports},a8d6:function(t,s,e){},bb51:function(t,s,e){"use strict";e.r(s);var i=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{attrs:{id:"category"}},[e("ctgr-nav-bar"),t.ctgrListData?e("category-list",{attrs:{"ctgr-list":t.ctgrListData},on:{clItemClick:t.clItemClick}}):t._e(),e("tab-control",{directives:[{name:"show",rawName:"v-show",value:t.isCopyTcShow,expression:"isCopyTcShow"}],ref:"copyTabControl",class:{"ctgr-tab-control":t.isCopyTcShow},attrs:{"tc-titles":t.titles},on:{tabControlClick:t.tabControlClick}}),e("scroll",{ref:"scroll",staticClass:"ctgr-scroll",attrs:{pullUpLoad:!0,click:!0},on:{scroll:t.scroll,pullingUp:t.pullingUp}},[e("category-item",{attrs:{ctgrItem:t.ctgrItemTempData},on:{ctgrItemImgLoad:t.itemImgLoad}}),t.isTcShow?e("tab-control",{ref:"tabControl",attrs:{"tc-titles":t.titles},on:{tabControlClick:t.tabControlClick}}):t._e(),t.isTcShow?e("category-goods-list",{attrs:{ctgrGoodsList:t.ctgrGoodsList[t.ctgrIndex][t.currentType]}}):t._e()],1)],1)},r=[],c=e("1bab");function n(){return Object(c["b"])({url:"/category"})}function o(t){return Object(c["b"])({url:"/subcategory",params:{maitKey:t}})}function a(t,s){return Object(c["b"])({url:"/subcategory/detail",params:{miniWallkey:t,type:s}})}var l=e("90b9"),u=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("nav-bar",{staticClass:"ctgr-nav-bar"},[e("div",{attrs:{slot:"center"},slot:"center"},[t._v("商品分类")])])},h=[],g=e("f1d4"),d={name:"CtgrNavBar",components:{NavBar:g["a"]}},f=d,p=(e("f253"),e("2877")),m=Object(p["a"])(f,u,h,!1,null,"3a66a34c",null),y=m.exports,C=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"ctgr-list"},t._l(t.ctgrList,(function(s,i){return e("div",{key:i,staticClass:"list-item",class:{active:t.currentIndex==i},on:{click:function(s){return t.clItemClick(i)}}},[t._v(t._s(s.title))])})),0)},I=[],b={name:"CategoryList",data:function(){return{currentIndex:0}},props:{ctgrList:{type:Array,default:function(){return[]}}},methods:{clItemClick:function(t){this.currentIndex=t,this.$emit("clItemClick",t)}}},v=b,T=(e("4c7b"),Object(p["a"])(v,C,I,!1,null,"1ff5e7ea",null)),L=T.exports,_=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"ctgr-item"},[e("div",{staticClass:"item"},t._l(t.ctgrItem,(function(s){return e("div",{staticClass:"item-info"},[e("img",{attrs:{src:s.image},on:{load:t.ctgrItemImgLoad}}),e("div",[t._v(t._s(s.title))])])})),0)])},k=[],x={name:"CategoryItem",data:function(){return{currentIndex:0}},props:{ctgrItem:{type:Array,default:function(){return[]}}},methods:{ctgrItemImgLoad:function(){this.$emit("ctgrItemImgLoad")}}},w=x,$=(e("60d0"),Object(p["a"])(w,_,k,!1,null,"66494130",null)),Y=$.exports,D=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("goods-list",t._l(t.ctgrGoodsList,(function(t){return e("goods-list-item",{attrs:{"goods-list-item":t}})})),1)},G=[],S=e("6d71"),j=e("9977"),O={name:"CategoryGoodsList",props:{ctgrGoodsList:{type:Array,default:function(){}}},components:{GoodsList:S["a"],GoodsListItem:j["a"]}},W=O,E=Object(p["a"])(W,D,G,!1,null,"649b3a3a",null),U=E.exports,A=e("9bd0"),N=e("5d17"),B={name:"Category",data:function(){return{isTcShow:!1,isCopyTcShow:!1,ctgrListData:null,ctgrItemData:null,ctgrItemTempData:null,refresh:null,miniWallkey:[],ctgrGoodsList:[],type:[],ctgrIndex:0,currentType:0,tcTopY:0,tcTopYs:[],ctgrY:0,titles:["综合","新品","销量"],positionYs:[]}},components:{CtgrNavBar:y,CategoryList:L,CategoryItem:Y,CategoryGoodsList:U,TabControl:A["a"],Scroll:N["a"]},methods:{_getCategory:function(){var t=this;n().then((function(s){var e=s.data.category.list;t.ctgrListData=e;for(var i=0;i<e.length;i++)t.miniWallkey.push(e[i].miniWallkey);t._getSubcategory(t.ctgrListData[0].maitKey)}))},_getSubcategory:function(t){var s=this;o(t).then((function(t){s.ctgrItemData=[],s.ctgrItemData[0]=t.data.list,s.ctgrItemTempData=t.data.list}))},_getCtgrGoodsList:function(t,s,e){var i=this;a(t,s).then((function(t){i.type.push(t),3==i.type.length&&(i.ctgrGoodsList[e]=i.type,i.isTcShow=!0,i.$nextTick((function(){i.tcTopY=i.$refs.tabControl.$el.offsetTop,i.tcTopYs[e]=i.tcTopY})),i.$refs.scroll.finishPullUp())}))},clItemClick:function(t){var s=this;this.ctgrIndex=t,this.tcTopY=this.tcTopYs[t],this.positionYs[t]&&this.$refs.scroll.scrollTo(0,-this.positionYs[t],0),!this.positionYs[t]||this.positionYs[t]<this.tcTopY?this.isCopyTcShow=!1:this.positionYs[t]&&this.positionYs[t]>this.tcTopY&&(this.isCopyTcShow=!0),this.ctgrGoodsList[t]||(this.isTcShow=!1,this.$refs.scroll.finishPullUp()),!this.ctgrItemData[t]&&o(this.ctgrListData[t].maitKey).then((function(e){s.ctgrItemData[t]=e.data.list,s.ctgrItemTempData=e.data.list})),this.ctgrItemTempData=this.ctgrItemData[t]},itemImgLoad:function(){this.refresh()},scroll:function(t){this.positionYs[this.ctgrIndex]=-t.y,-t.y>=this.tcTopY&&0!==this.tcTopY?this.isCopyTcShow=!0:this.isCopyTcShow=!1},pullingUp:function(){this.ctgrGoodsList[this.ctgrIndex]||(this.type=[],this._getCtgrGoodsList(this.miniWallkey[this.ctgrIndex],"pop",this.ctgrIndex),this._getCtgrGoodsList(this.miniWallkey[this.ctgrIndex],"new",this.ctgrIndex),this._getCtgrGoodsList(this.miniWallkey[this.ctgrIndex],"sell",this.ctgrIndex))},tabControlClick:function(t){this.currentType=t,this.$refs.tabControl.currentIndex=t,this.$refs.copyTabControl.currentIndex=t}},created:function(){this._getCategory()},mounted:function(){var t=this;this.refresh=Object(l["a"])(this.$refs.scroll.refresh,20),this.$bus.$on("gliImgLoad",(function(){t.refresh()}))},activated:function(){this.$refs.scroll.refresh(),this.$refs.scroll.scrollTo(0,this.ctgrY,0)},deactivated:function(){this.ctgrY=this.$refs.scroll.scroll.y}},K=B,J=(e("5961"),Object(p["a"])(K,i,r,!1,null,"7372a092",null));s["default"]=J.exports},cc92:function(t,s,e){"use strict";var i=e("9a2a"),r=e.n(i);r.a},f253:function(t,s,e){"use strict";var i=e("2d5e"),r=e.n(i);r.a}}]);
//# sourceMappingURL=chunk-a28be230.324a8347.js.map